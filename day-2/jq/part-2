jq -R | jq -s 'map(split(" ")) | map([.[0], (.[1] | tonumber)]) | reduce .[] as $i ([0,0,0]; if $i[0] | test("f") then [.[0]+(.[2]*$i[1]),.[1]+$i[1],.[2]] elif $i[0] | test("u") then [.[0],.[1],.[2]-$i[1]] elif $i[0] | test("d") then [.[0],.[1],.[2]+$i[1]] else . end) | .[0]*.[1]'
